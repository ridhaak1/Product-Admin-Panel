<%- include("partials/navbar") %>

<main class="mp-container">

  <!-- Search Box -->
  <form action="#" class="mp-searchBox">
      <input class="mp-searchInput" 
             type="search" 
             name="search" 
             value="<%= search || '' %>" 
             placeholder="Search country üîç">
      <button class="mp-searchBtn" type="submit">üîç</button>
  </form>

  <!-- Countries Table -->
  <table class="mp-table">
      <thead>
          <tr>

              <!-- Sort by Name -->
              <th>
                  <form method="get" action="">
                      <input type="hidden" name="sortField" value="name">
                      <input type="hidden" name="order" value="<%= (currentOrder === 'asc') ? 'desc' : 'asc' %>">
                      <button type="submit">
                          Country
                          <span class="<%= (currentSort === 'name') ? 'is-active' : '' %>">
                              <%= (currentOrder === 'asc') ? '‚ñº' : '‚ñ≤' %>
                          </span>
                      </button>
                  </form>
              </th>

              <!-- Continent -->
              <th>Continent</th>

              <!-- Sort by Independence Year -->
              <th>
                  <form method="get" action="">
                      <input type="hidden" name="sortField" value="independenceYear">
                      <input type="hidden" name="order" value="<%= (currentOrder === 'asc') ? 'desc' : 'asc' %>">
                      <button type="submit">
                          Independence
                          <span class="<%= (currentSort === 'independenceYear') ? 'is-active' : '' %>">
                              <%= (currentOrder === 'asc') ? '‚ñ≤' : '‚ñº' %>
                          </span>
                      </button>
                  </form>
              </th>

              <th>Motto</th>
              <th>Action</th>
          </tr>
      </thead>

      <tbody>
          <% countries.forEach(country => { %>
          <tr>

              <!-- Country + Flag + Tooltip -->
              <td>
                  <div class="mp-cityCell mp-tooltip">
                      <img class="mp-cityImg" src="<%= country.flagUrl %>" alt="Flag">

                      <span class="mp-cityName"><%= country.name %></span>

                      <!-- Tooltip -->
                      <div class="mp-tooltip-text">
                          <strong><%= country.name %></strong><br>
                          <%= country.motto %>
                      </div>
                  </div>
              </td>

              <td><%= country.continent %></td>
              <td><%= country.independenceYear %></td>
              <td><%= country.motto %></td>

              <td>
                <a class="mp-actionLink" 
                   href="/countries/details/<%= country.id %>" >
                   View details
                </a>
              </td>

          </tr>
          <% }); %>
      </tbody>
  </table>

</main>

<%- include("partials/footer") %>
